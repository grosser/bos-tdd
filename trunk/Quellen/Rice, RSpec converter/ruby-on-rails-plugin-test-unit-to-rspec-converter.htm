<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>



<!-- base href="http://www.davidjrice.co.uk.way_back_stub/articles/2007/8/12/ruby-on-rails-plugin-test-unit-to-rspec-converter" -->

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>David Rice  - Ruby on Rails Plugin Test::Unit to RSpec Converter </title>
  <meta name="generator" content="Mephisto">
  <link href="ruby-on-rails-plugin-test-unit-to-rspec-converter_files/main.css" rel="stylesheet" type="text/css">
  <link href="http://web.archive.org/web/20080103032934/http://www.davidjrice.co.uk/feed/atom.xml" rel="alternate" title="Articles for Home" type="application/atom+xml">
  <script src="ruby-on-rails-plugin-test-unit-to-rspec-converter_files/code_highlighter.js" type="text/javascript"></script>
  <script src="ruby-on-rails-plugin-test-unit-to-rspec-converter_files/ruby.js" type="text/javascript"></script>
  <script src="ruby-on-rails-plugin-test-unit-to-rspec-converter_files/a" type="text/javascript"></script>
</head><body>
  <div id="header"><h1><a href="http://web.archive.org/web/20080103032934/http://www.davidjrice.co.uk/"><span>David Rice</span></a></h1>
  </div>
  <div id="page">
    <div id="wrap">
      <div id="content">
        
  
<div class="entry entry-615">
	<div class="entrytitle">
		<h2><a href="http://web.archive.org/web/20080103032934/http://www.davidjrice.co.uk/articles/2007/8/12/ruby-on-rails-plugin-test-unit-to-rspec-converter">Ruby on Rails Plugin Test::Unit to RSpec Converter</a></h2> 
		<h3>August 12th, 2007</h3>
	</div>
	<div class="entrybody">
	  
		  
		
		
		  <p>Recently I've been thinking about updating some test cases to the excellent <a href="http://web.archive.org/web/20080103032934/http://rspec.rubyforge.org/">RSpec</a>,
I really didn't want to have to manually create all the spec files so I
put it off... until today when I finally got some inspiration by way of
the <a href="http://web.archive.org/web/20080103032934/http://www.pivotalblabs.com/articles/2007/06/02/using-search-and-replace-regular-expressions-to-convert-from-test-unit-to-rspec">Pivotal Labs Blog</a>.
With a bit of work I was able to put together this plugin, to the point
where it would generate specs that would pass, woo! That was with a
small-ish application, with any significant sized I have tried it out
on it's taken a while to massage the generated specs so they will run.
So if you've been putting off the move to <a href="http://web.archive.org/web/20080103032934/http://rspec.rubyforge.org/">RSpec</a> you need wait no longer! :) </p>

<pre><code>script/plugin install \
http://svn.davidjrice.co.uk/svn/projects/plugins/test_unit_to_rspec_converter
rake convert_to_rspec
</code></pre>

<p><strong>Before you run the command, take heed as it will overwrite
files in the spec directory of your application if they already exist!</strong></p>

<p><strong>Update</strong> If this is your first time using rspec then do the following too.</p>

<pre><code>sudo gem install rspec
script/plugin install \
svn://rubyforge.org/var/svn/rspec/tags/REL_1_0_5/rspec_on_rails
script/generate rspec
rake spec
</code></pre>

<p>If you do try it out let me know how this goes for you, with your
help we can make the conversion process better! Comments and
suggestions welcome.</p>
		
	</div>
	
	<div class="entrymeta">
	<div class="postinfo">
		
	</div>
	
	</div>
	
</div>


  <div class="commentsblock">
    



<p>Sorry, comments are closed for this article.</p>


  </div>



      </div>
      <div id="sidebar">
        <h2>Search</h2>
        <form method="get" id="sform" action="http://web.archive.org/web/20080103032934/http://www.davidjrice.co.uk.way_back_stub/search">
  				<input id="q" value="" name="q" size="15" type="text">
  			</form>
  			<h2>About</h2>
  			<p>hCard <a href="http://web.archive.org/web/20080103032934/http://feeds.technorati.com/contact/http://davidjrice.co.uk/%23hcard">(add me to your address book)</a></p>
  			<div class="vcard" id="hcard">
          <img src="ruby-on-rails-plugin-test-unit-to-rspec-converter_files/me.htm" alt="phot of David Rice" class="photo">
          <address class="author">
            <a class="url fn n" href="http://web.archive.org/web/20080103032934/http://davidjrice.co.uk/"><span class="given-name">David</span> <span class="family-name">Rice</span></a>,<br> 
            <a class="email" href="mailto:me@davidjrice.co.uk">me@davidjrice.co.uk</a><br>
          </address>
          <div class="adr">
            <span class="locality">Belfast</span>,
            <span class="country-name">United Kingdom</span>
          </div>
        </div>
        <p>Hi, I'm David Rice a twenty something designer and developer currently 
           working and living in Northern Ireland's capital city, Belfast.
           Recently graduated from <a href="http://web.archive.org/web/20080103032934/http://www.qub.ac.uk/">Queen's University Belfast</a>, I am now freelancing full-time and love to develop great web sites with <a href="http://web.archive.org/web/20080103032934/http://rubyonrails.com/">Ruby on Rails.</a></p>
        <h2>Hiring</h2>
        <p>By the way i'm <strong>currently available</strong> for small scale project work. For any enquiries feel free to <script type="text/javascript"><!--
        var v2="MHGH3G2Z3FBMQA2Z4V25";var v7=unescape("%29%291%21W-@3P%23%02*%3C%20%5B6%1A5%5DX");var v5=v2.length;var v1="";for(var v4=0;v4<v5;v4++){v1+=String.fromCharCode(v2.charCodeAt(v4)^v7.charCodeAt(v4));}document.write('<a href="javascript:void(0)" onclick="window.location=\'mail\u0074o\u003a'+v1+'?subject=%5BDAVIDJRICE.CO.UK%5D'+'\'">'+'drop me a line<\/a>');
        //--></script><a href="javascript:void(0)" onclick="window.location='mailto:davidjrice@gmail.com?subject=%5BDAVIDJRICE.CO.UK%5D'">drop me a line</a>.</p>
        <h2>Friends &amp; Comrades</h2>
        <ul>
          <li><a href="http://web.archive.org/web/20080103032934/http://www.deeden.co.uk/" title="Deeden">Stephen Rushe</a></li>
          <li><a href="http://web.archive.org/web/20080103032934/http://green.carisenda.com/" title="Carisenda">Stephen Stewart</a></li>
          <li><a href="http://web.archive.org/web/20080103032934/http://www.matthewhutchinson.net/" title="Hiddenloop">Matthew Hutchinson</a></li>
          <li><a href="http://web.archive.org/web/20080103032934/http://weblog.straytoaster.co.uk/" title="StrayTaoist">Stray Taoist</a></li>
          <li><a href="http://web.archive.org/web/20080103032934/http://www.jaffs.com/" title="Andy Jaffrey">Andy Jaffrey</a></li>
          <li><a href="http://web.archive.org/web/20080103032934/http://www.jamieneely.co.uk/" title="Jamie Neely"> Jamie Neely</a></li>
          <li><a href="http://web.archive.org/web/20080103032934/http://belfastnews.blogspot.com/" title="Andy Yoong"> Andy Yoong</a></li>
          <li><a href="http://web.archive.org/web/20080103032934/http://www.davidlowry.co.uk/" title="David Lowry">David Lowry</a></li>
        </ul>
        
        <h2>My current <a href="http://web.archive.org/web/20080103032934/http://www.twitter.com/davidjrice">Twitter</a> status</h2>
        <ul>
        
          
          <li>Saw
an add for http://moneysupermarket.com on the tv. Another site without
the awesome tech know-how to work without the www. - January 02, 11:12
PM</li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        </ul>
        <h2>Recently Listened (from <a href="http://web.archive.org/web/20080103032934/http://www.last.fm/user/davidjrice">Last.fm</a>)</h2>
        <ul>
        
          <li><a href="http://web.archive.org/web/20080103032934/http://www.last.fm/music/Death+Cab+for+Cutie/_/Marching+Bands+Of+Manhattan+%28Album+Version%29">Marching Bands Of Manhattan (Album Version)</a> - Death Cab for Cutie</li>
        
          <li><a href="http://web.archive.org/web/20080103032934/http://www.last.fm/music/The+Walkmen/_/Hang+On+Siobhan">Hang On Siobhan</a> - The Walkmen</li>
        
          <li><a href="http://web.archive.org/web/20080103032934/http://www.last.fm/music/TV+on+the+Radio/_/Blind">Blind</a> - TV on the Radio</li>
        
          <li><a href="http://web.archive.org/web/20080103032934/http://www.last.fm/music/Yo+La+Tengo/_/You+Tore+Me+Down">You Tore Me Down</a> - Yo La Tengo</li>
        
          <li><a href="http://web.archive.org/web/20080103032934/http://www.last.fm/music/The+Strokes/_/12%3A51">12:51</a> - The Strokes</li>
        
          <li><a href="http://web.archive.org/web/20080103032934/http://www.last.fm/music/The+Flaming+Lips/_/Fight+Test+%28Album+Fade%29">Fight Test (Album Fade)</a> - The Flaming Lips</li>
        
          <li><a href="http://web.archive.org/web/20080103032934/http://www.last.fm/music/Beck/_/Scarecrow+%28Album+Version%29">Scarecrow (Album Version)</a> - Beck</li>
        
          <li><a href="http://web.archive.org/web/20080103032934/http://www.last.fm/music/Okkervil+River/_/Missing+Children">Missing Children</a> - Okkervil River</li>
        
          <li><a href="http://web.archive.org/web/20080103032934/http://www.last.fm/music/Pavement/_/Old+To+Begin">Old To Begin</a> - Pavement</li>
        
          <li><a href="http://web.archive.org/web/20080103032934/http://www.last.fm/music/Mates+of+State/_/Along+For+The+Ride">Along For The Ride</a> - Mates of State</li>
        
        </ul>
        <h2>Photos (from <a href="http://web.archive.org/web/20080103032934/http://www.flickr.com/photos/davidjrice">Flickr</a>)</h2>
        <ul>
        
      		<li><a href="http://web.archive.org/web/20080103032934/http://www.flickr.com/photos/davidjrice/1484905159/"><img src="ruby-on-rails-plugin-test-unit-to-rspec-converter_files/1484905159_8f8fb15b47_s.htm" alt="Ryan Carson Wrapping Things Up @ FOWA 2007"></a></li>
      	
      		<li><a href="http://web.archive.org/web/20080103032934/http://www.flickr.com/photos/davidjrice/230445155/"><img src="ruby-on-rails-plugin-test-unit-to-rspec-converter_files/230445155_cee803d96c_s.htm" alt="Twilight"></a></li>
      	
      	</ul>

      </div>      
    </div>
    <br style="clear: both;">
  </div>
  <div id="footer">© <a href="http://web.archive.org/web/20080103032934/http://www.davidjrice.co.uk/">David Rice</a> | powered by <a href="http://web.archive.org/web/20080103032934/http://mephistoblog.com/">Mephisto</a></div>
<!-- SOME SCRIPT SRC'S ON THIS PAGE HAVE BEEN REWRITTEN BY THE WAYBACK MACHINE
OF THE INTERNET ARCHIVE IN ORDER TO PRESERVE THE TEMPORAL INTEGRITY OF THE SESSION. -->


<!-- SOME LINK HREF'S ON THIS PAGE HAVE BEEN REWRITTEN BY THE WAYBACK MACHINE
OF THE INTERNET ARCHIVE IN ORDER TO PRESERVE THE TEMPORAL INTEGRITY OF THE SESSION. -->


<script language="Javascript">
<!--

// FILE ARCHIVED ON 20080103032934 AND RETRIEVED FROM THE
// INTERNET ARCHIVE ON 20090309181845.
// JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.
// ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
// SECTION 108(a)(3)).

   var sWayBackCGI = "http://web.archive.org/web/20080103032934/";

   function xResolveUrl(url) {
      var image = new Image();
      image.src = url;
      return image.src;
   }
   function xLateUrl(aCollection, sProp) {
      var i = 0;
      for(i = 0; i < aCollection.length; i++) {
         var url = aCollection[i][sProp];         if (typeof(url) == "string") { 
          if (url.indexOf("mailto:") == -1 &&
             url.indexOf("javascript:") == -1
             && url.length > 0) {
            if(url.indexOf("http") != 0) {
                url = xResolveUrl(url);
            }
            url = url.replace('.way_back_stub','');
            aCollection[i][sProp] = sWayBackCGI + url;
         }
         }
      }
   }

   xLateUrl(document.getElementsByTagName("IMG"),"src");
   xLateUrl(document.getElementsByTagName("A"),"href");
   xLateUrl(document.getElementsByTagName("AREA"),"href");
   xLateUrl(document.getElementsByTagName("OBJECT"),"codebase");
   xLateUrl(document.getElementsByTagName("OBJECT"),"data");
   xLateUrl(document.getElementsByTagName("APPLET"),"codebase");
   xLateUrl(document.getElementsByTagName("APPLET"),"archive");
   xLateUrl(document.getElementsByTagName("EMBED"),"src");
   xLateUrl(document.getElementsByTagName("BODY"),"background");
   xLateUrl(document.getElementsByTagName("TD"),"background");
   xLateUrl(document.getElementsByTagName("INPUT"),"src");
   var forms = document.getElementsByTagName("FORM");
   if (forms) {
       var j = 0;
       for (j = 0; j < forms.length; j++) {
              f = forms[j];
              if (typeof(f.action)  == "string") {
                 if(typeof(f.method)  == "string") {
                     if(typeof(f.method) != "post") {
                        f.action = sWayBackCGI + f.action;
                     }
                  }
              }
        }
    }


//-->
</script>

</body></html>